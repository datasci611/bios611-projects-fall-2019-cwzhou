menuItem("Introduction", tabName = "background", icon = icon("home")),
menuItem("Goals", tabName = "goals", icon = icon("star")),
menuItem("Data Source", tabName = "data", icon = icon("database")),
menuItem("Data Analysis", tabName = "analysis", icon = icon("chart-bar"))
)
),
## Body content
dashboardBody(
tabItems(
# FIRST tab content
tabItem(tabName = "background",
h2("Background"),
htmlOutput("background")
),
# SECOND tab content
tabItem(tabName = "goals",
h2("Project Aims"),
htmlOutput("goals")
),
# THIRD tab content
tabItem(tabName = "data",
h2("Data Source and Data Cleaning"),
htmlOutput("data")
),
# FOURTH tab content
tabItem(tabName = "analysis",
h2("Data Analysis: Results and Conclusions"),
fluidRow(
box(plotOutput("plot1", height = 250)),
box(
title = "hi",
sliderInput("slider", "Number of observations:", 1, 100, 50)
)
),
sidebarPanel(
radioButtons("radio", label = "Select a variable",
choices = c("Food.Provided.for", "Food.Pounds","Clothing.Items",
"Diapers", "School.Kits", "Hygiene.Kits")),
textOutput("text1") #Number of People in Household (food provided for)
),
mainPanel(
plotOutput(outputId = "varPlot")
)
)
)
)
)
server <- function(input, output) {
# INTRODUCTION/BACKGROUND
output$background <- renderUI({
HTML(paste(bg1, bg2, sep="<br/>"), paste(ref1[1], ref1[2], sep = "\n"))
})
# GOALS
output$goals<- renderUI({
HTML(paste(g1), paste("<ul><li>", g2[1],
"</li><li>",  g2[2]))
})
# DATA SOURCE and DATA CLEANING
output$data<- renderUI({
HTML(paste(ds1,ds2, ds3, sep="<br/>"))
})
# ANALYSIS
set.seed(122)
histdata <- rnorm(500)
output$plot1 <- renderPlot({
data <- histdata[seq_len(input$slider)]
hist(data)
})
output$varPlot <- renderPlot({
newdf=helper1(input$radio)
helper2(newdf, input$radio)
})
output$text1 <- renderText({
paste("You selected", toString(input$radio))
})
}
shinyApp(ui, server)
helper1(Food.Provided.for)
#Project 2
library(tidyverse)
#setwd("~/Desktop/611 Notes/bios611-projects-fall-2019-cwzhou/project_2")
# INTRODUCTION/BACKGROUND
bg1 = c("Homelessness is defined as any person living without a home. Homeless people typically live on the streets. In North Carolina, the Continuums of Care to the U.S. Department of Housing and Urban Development (HUD) reported approximately 9,268 people experience homelessness on any given day as of January 2018 (1). Shelters and volunteers attempt to lower this number by providing resources that can potentially help a person or family find the means to obtain a home, and thus stop living on the streets.")
bg2=c("One of these shelters in Durham, North Carolina, is Urban Ministries of Durham (UMD). Established in 1983, UMD is a non-profit organization that focuses on lowering the community's rate of homelessness by providing food, shelter and other resources to those in need. In 2001, three organizations (Durham Community Shelter for HOPE, St. Philip’s Community Cafe, and the United Methodist Mission Society) merged to create UMD as it exists today. UMD strives to holistically lower Durham's homelessness rates with the help from the Durham community and over 4,000 volunteers. UMD provides 'food, shelter, and a future' to over 6,000 men, women, and children every year (2).")
ref1 = c("1) https://www.usich.gov/homelessness-statistics/nc/", "2) http://www.umdurham.org/")
# GOALS
g2 = c("Create an user-friendly interactive Shiny dashboard to display various UMD data trends
(such as Food.Provided.for, Food.Pounds, Clothing.Items, Diapers, School.Kits, Hygiene.Kits)",
"Examine the number of visits each year per client and this trend over time")
g1 = c("For this project, after data cleaning, we have the following aims:")
# DATA SOURCE and DATA CLEANING
ds1 = c("The data for our analysis is from UMD. UMD has been collecting data about people who utilize its resources for decades. This data includes an identifier (ID), date of visit, number of people the food from that visit provided for, pounds of food taken from food pantry, amount of clothing taken from clothing closet, and more. The total number of observations of this data is 79838.")
ds3 = c("Variable descriptions for the UMD data can be found here: https://github.com/biodatascience/datasci611/blob/gh-pages/data/project1_2019/UMD_Services_Provided_metadata_20190719.tsv")
ds2 = c("Since UMD as it is known today was created in 2001, we truncate our dataset to be collected data from January 1, 2001 to the last date of a full year of data, which is December 31, 2018. Since the data for 2019 is not complete, we omit data that was collected after December 31, 2018.")
# DATA CLEANING
#load dataset
urban <- read.delim("~/Desktop/611 Notes/bios611-projects-fall-2019-cwzhou/project_1/data/UMD_Services_Provided_20190719.tsv", header=T)
#change date format
urban$Date <- as.Date(urban$Date, "%m/%d/%Y")
#extract year variable
urban$Year <- format(as.Date(urban$Date, format="%d/%m/%Y"),"%Y")
#create dataset df1 that remove dates from FUTURE
df1 <- filter(urban, urban$Date <= Sys.Date())
#create a dataset df2 that only keeps dates of interest and variables of interest
df2 = df1 %>%
arrange(Client.File.Number,Date,Year) %>%
select(Date, Year, Client.File.Number,
Food.Provided.for, Food.Pounds,
Clothing.Items, Diapers, School.Kits, Hygiene.Kits) %>%
filter(Date >= "2001-01-01")%>% #to stay up to date with current trends, we will only examine data in the 20 years (2001-01-01 to 2018-12-31)
filter(Date <= "2018-12-31")
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(get(var)) %>% as.data.frame()
}
helper2 = function(df,var){
ggplot(df,
aes(x=get(var), y = Year)) +
geom_point() +
labs(y = "Year",
x = "Selected Variable",
title = "Scatter Plot of UMD variables by Year")
}
## app.R ##
library(shinydashboard)
library(shiny)
#setwd("~/Desktop/611 Notes/bios611-projects-fall-2019-cwzhou/project_2")
source("helper_functions.R")
ui <- dashboardPage(
dashboardHeader(title = "Project 2 Urban Ministries Analysis Dashboard",
titleWidth = 450
),
## Sidebar content
dashboardSidebar(
sidebarMenu(
menuItem("Introduction", tabName = "background", icon = icon("home")),
menuItem("Goals", tabName = "goals", icon = icon("star")),
menuItem("Data Source", tabName = "data", icon = icon("database")),
menuItem("Data Analysis", tabName = "analysis", icon = icon("chart-bar"))
)
),
## Body content
dashboardBody(
tabItems(
# FIRST tab content
tabItem(tabName = "background",
h2("Background"),
htmlOutput("background")
),
# SECOND tab content
tabItem(tabName = "goals",
h2("Project Aims"),
htmlOutput("goals")
),
# THIRD tab content
tabItem(tabName = "data",
h2("Data Source and Data Cleaning"),
htmlOutput("data")
),
# FOURTH tab content
tabItem(tabName = "analysis",
h2("Data Analysis: Results and Conclusions"),
fluidRow(
box(plotOutput("plot1", height = 250)),
box(
title = "hi",
sliderInput("slider", "Number of observations:", 1, 100, 50)
)
),
sidebarPanel(
radioButtons("radio", label = "Select a variable",
choices = c("Food.Provided.for", "Food.Pounds","Clothing.Items",
"Diapers", "School.Kits", "Hygiene.Kits")),
textOutput("text1") #Number of People in Household (food provided for)
),
mainPanel(
plotOutput(outputId = "varPlot")
)
)
)
)
)
server <- function(input, output) {
# INTRODUCTION/BACKGROUND
output$background <- renderUI({
HTML(paste(bg1, bg2, sep="<br/>"), paste(ref1[1], ref1[2], sep = "\n"))
})
# GOALS
output$goals<- renderUI({
HTML(paste(g1), paste("<ul><li>", g2[1],
"</li><li>",  g2[2]))
})
# DATA SOURCE and DATA CLEANING
output$data<- renderUI({
HTML(paste(ds1,ds2, ds3, sep="<br/>"))
})
# ANALYSIS
set.seed(122)
histdata <- rnorm(500)
output$plot1 <- renderPlot({
data <- histdata[seq_len(input$slider)]
hist(data)
})
output$varPlot <- renderPlot({
newdf=helper1(input$radio)
helper2(newdf, input$radio)
})
output$text1 <- renderText({
paste("You selected", toString(input$radio))
})
}
shinyApp(ui, server)
seq_len
?seq_len
seq_len(100)
histdata
histdata[1:10]
df2 %>%
na.omit(get(var)) %>% as.data.frame()
helper1(Clothing.Items)
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
na.omit(var) %>% as.data.frame()
}
helper1(Clothing.Items)
df2%>%na.omit(Clothing.Items)
df2%>%drop_na(Clothing.Items)
head(df2%>%drop_na(Clothing.Items))
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
select(var) %>%
na.omit(var) %>% as.data.frame()
}
helper1(Clothing.Items)
colnames(df2)
helper1(Clothing.Items)
helper1(School.Kits)
colnames(df2)
df2 %>%
select(df2$var) %>%
na.omit(df2$var) %>% as.data.frame()
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
select(df2$var) %>%
na.omit(df2$var) %>% as.data.frame()
}
helper1(School.Kits)
helper1(Clothing.Items)
df2 %>%
select(Clothing.Items) %>%
na.omit(Clothing.Items) %>% as.data.frame()
head(df2 %>%
select(Clothing.Items) %>%
na.omit(Clothing.Items) %>% as.data.frame())
head(df2 %>%
select(Client.File.Number,Date,Year,School.Kits) %>%
na.omit(School.Kits) %>% as.data.frame())
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
select(Client.File.Number,Date,Year,var) %>%
na.omit(var) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
}
helper1(Sch)
helper1(School.Kits)
helper1(df2$School.Kits)
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
select(Client.File.Number,Date,Year,df2$var) %>%
na.omit(df2$var) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
}
helper1(df2$School.Kits)
helper1(School.Kits)
head(helper1(School.Kits))
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
na.omit(df2$var) %>%
select(Client.File.Number,Date,Year,df2$var) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
}
head(helper1(School.Kits))
df1$School.Kits
View(df1$School.Kits)
View(df1$Hygeine.Kits)
View(df1$Hygiene.Kits)
head(helper1(Hygeine.Kits))
head(helper1(Food.Provided.for))
head(helper1(Food.Provided.for))
df2 %>%
na.omit(df2$Food.Provided.for) %>%
select(Client.File.Number,Date,Year,df2$Food.Provided.for) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
df2 %>%
na.omit(df2$Food.Provided.for)
df2 %>%
drop_na(df2$Food.Provided.for)
df2 %>% drop_na(df2$Food.Provided.for)
df2 %>% drop_na(dFood.Provided.for)
df2 %>% drop_na(Food.Provided.for)
df2 %>%
drop_na(df2$Food.Provided.for) %>%
select(Client.File.Number,Date,Year,df2$Food.Provided.for) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
df2 %>%
drop_na(Food.Provided.for) %>%
select(Client.File.Number,Date,Year,Food.Provided.for) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(var) %>%
select(Client.File.Number,Date,Year,var) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
}
head(helper1(Food.Provided.for))
head(helper1(df2$Food.Provided.for))
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(var) #%>%
# select(Client.File.Number,Date,Year,var) %>%
#  arrange(Client.File.Number,Date,Year) %>%
#  as.data.frame()
}
head(helper1(df2$Food.Provided.for))
head(helper1(Food.Provided.for))
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(df2[,var]) #%>%
select(Client.File.Number,Date,Year,df2[,var]) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
}
head(helper1(Food.Provided.for))
head(helper1(df2$Food.Provided.for))
df2[,Food.Provided.for]
df2[,Food.Provided.for]
colnames(df2)
colnames(df2)
df2[,Food.Provided.for]
df2[,1]
df2[,5]
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(df2[,"var"]) #%>%
select(Client.File.Number,Date,Year,df2[,"var"]) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
}
head(helper1(Food.Provided.for))
df2[,"Food.Provided.for"]
drop_na(df2[,"Food.Provided.for"])
na.omit(df2[,"Food.Provided.for"])
head(helper1("Food.Provided.for"))
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(df2[,var]) #%>%
select(Client.File.Number,Date,Year,df2[,var]) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
}
head(helper1("Food.Provided.for"))
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(df2[,var]) %>%
select(Client.File.Number,Date,Year,df2[,var]) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
}
head(helper1("Food.Provided.for"))
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(df2[,var]) %>%
select(Client.File.Number,Date,Year,df2[,var]) %>%
arrange(Client.File.Number,Date,Year) %>%
as.data.frame()
}
head(helper1("Food.Provided.for"))
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(df2[,var])# %>%
#   select(Client.File.Number,Date,Year,df2[,var]) %>%
#    arrange(Client.File.Number,Date,Year) %>%
#    as.data.frame()
}
head(helper1("Food.Provided.for"))
df2 %>% drop_na(df2[,Food.Provided.for])
df2 %>% drop_na(df2[,"Food.Provided.for"])
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(df2,var)# %>%
#   select(Client.File.Number,Date,Year,df2[,var]) %>%
#    arrange(Client.File.Number,Date,Year) %>%
#    as.data.frame()
}
head(helper1("Food.Provided.for"))
drop_na(df2,”Food.Provided.for”)
drop_na(df2,"Food.Provided.for")
helper1 = function(var){
df2 %>%
drop_na(df2,var) %>%
as.data.frame()
#   select(Client.File.Number,Date,Year,df2[,var]) %>%
#    arrange(Client.File.Number,Date,Year) %>%
#
}
head(helper1("Food.Provided.for"))
head(helper1(Food.Provided.for))
helper1 = function(var){
df2 %>%
as.data.frame() %>%
drop_na(df2,var) #%>%
#   select(Client.File.Number,Date,Year,df2[,var]) %>%
#    arrange(Client.File.Number,Date,Year) %>%
#
}
head(helper1("Food.Provided.for"))
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
as.data.frame() %>%
drop_na(df2,var) #%>%
#   select(Client.File.Number,Date,Year,df2[,var]) %>%
#    arrange(Client.File.Number,Date,Year) %>%
#
}
head(helper1("Food.Provided.for"))
head(helper1(Food.Provided.for))
head(helper1(Food.Provided.for))
head(helper1("Food.Provided.for"))
df2%>%as.data.frame()%>%drop_na(df2,"Food.Provided.for")
df2%>%as.data.frame()%>%drop_na(df2,Food.Provided.for)
df2 %>%
as.data.frame()
hi = df2 %>% as.data.frame()
drop_na(hi,var)
drop_na(hi,Food.Provided.for)
#create a dataset df2 that only keeps dates of interest and variables of interest
df2 = df1 %>%
arrange(Client.File.Number,Date,Year) %>%
select(Date, Year, Client.File.Number,
Food.Provided.for, Food.Pounds,
Clothing.Items, Diapers, School.Kits, Hygiene.Kits) %>%
filter(Date >= "2001-01-01")%>% #to stay up to date with current trends, we will only examine data in the 20 years (2001-01-01 to 2018-12-31)
filter(Date <= "2018-12-31") %>%
as.data.frame()
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(var) %>%
select(Client.File.Number,Date,Year,df2[,var]) %>%
arrange(Client.File.Number,Date,Year)
}
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
drop_na(var) %>%
select(Client.File.Number,Date,Year,df2[,var]) %>%
arrange(Client.File.Number,Date,Year)
}
head(helper1("Food.Provided.for"))
df2[,"Food.Provided.for"]
# ANALYSIS
#create data frame for complete case analysis without missing values for variable selected
helper1 = function(var){
df2 %>%
arrange(Client.File.Number,Date,Year)  %>%
drop_na(var) %>%
select(Client.File.Number,Date,Year,var)
}
head(helper1("Food.Provided.for"))
